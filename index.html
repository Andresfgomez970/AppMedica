<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Evaluación del Neurodesarrollo</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">
  <div class="max-w-4xl mx-auto mt-12 p-6 bg-white rounded-xl shadow-md">
    <h1 class="text-2xl font-bold mb-6 text-blue-700">Evaluación del Neurodesarrollo (0 a 6 años)</h1>
    <p class="mb-6 text-gray-600">Seleccione el rango de edad para visualizar los hitos del desarrollo y sus respectivas banderas rojas, según la Cartilla ASCONI.</p>

    <div class="flex gap-4 mb-6">
      <label for="edad" class="font-medium self-center">Rango de edad:</label>
      <select id="edad" onchange="mostrarTabla()" class="px-4 py-2 border rounded-md">
        <option value="0_3">0 a 3 meses</option>
        <option value="4_6">4 a 6 meses</option>
        <option value="7_9">7 a 9 meses</option>
        <option value="10_12">10 a 12 meses</option>
        <option value="13_18">13 a 18 meses</option>
        <option value="19_24">19 a 24 meses</option>
        <option value="25_30">25 a 30 meses</option>
        <option value="31_36">31 a 36 meses</option>
        <option value="3_4_anios">3 a 4 años</option>
        <option value="4_6_anios">4 a 6 años</option>
      </select>
    </div>

    <div id="tabla-hitos" class="mb-10 hidden">
      <h2 class="text-xl font-semibold text-blue-600 mb-2">Hitos del Desarrollo</h2>
      <div id="tabla-hitos-contenido"></div>
    </div>

    <div id="tabla-banderas" class="hidden">
      <h2 class="text-xl font-semibold text-red-600 mb-2">Banderas Rojas</h2>
      <div id="tabla-banderas-contenido"></div>
    </div>
  </div>

  <script>
    async function mostrarTabla() {
      const edad = document.getElementById("edad").value;
      try {
        const response = await fetch(`asconi_json_por_rango/edad_${edad}.json`);
        const data = await response.json();

        document.getElementById("tabla-hitos-contenido").innerHTML = generarTabla(data.hitos, "Hito", "bg-blue-100");
        document.getElementById("tabla-banderas-contenido").innerHTML = generarTabla(data.banderas, "Alerta", "bg-red-100");
        document.getElementById("tabla-hitos").classList.remove("hidden");
        document.getElementById("tabla-banderas").classList.remove("hidden");
      } catch (err) {
        console.error("Error cargando datos:", err);
        document.getElementById("tabla-hitos-contenido").innerHTML = "<p class='text-red-600'>No se pudo cargar la información.</p>";
        document.getElementById("tabla-banderas-contenido").innerHTML = "";
      }
    }

    function generarTabla(items, header, color) {
      let html = `<table class='table-auto w-full border text-sm'><thead class='${color}'>` +
        `<tr><th class='border px-4 py-2'>Área</th><th class='border px-4 py-2'>${header}</th></tr></thead><tbody>`;
      for (const item of items) {
        html += `<tr><td class='border px-4 py-2'>${item.área}</td><td class='border px-4 py-2'>${item.descripcion}</td></tr>`;
      }
      html += "</tbody></table>";
      return html;
    }
  </script>
</body>
</html>
